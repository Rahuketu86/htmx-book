# AUTOGENERATED! DO NOT EDIT! File to edit: 01_main.ipynb.

# %% auto 0
__all__ = ['app', 'Contact', 'index', 'contacts']

# %% 01_main.ipynb 2
import pandas as pd
from flask import Flask, redirect
from flask import render_template
import json

# %% 01_main.ipynb 5
class Contact(object):
    def __init__(self) -> None:
        self.db = pd.read_json('contactdb.json')

    def search(self, q):
        return self.db[self.db['firstname'].str.lower().str.contains(q)].to_dict('records')

    def all(self):
        return self.db.to_dict('records')

# %% 01_main.ipynb 6
app = Flask(__name__)

# %% 01_main.ipynb 7
@app.get("/")
def index():
    return redirect("/contacts")

# %% 01_main.ipynb 8
@app.get("/contacts")
def contacts():
    contact_set = Contact().all()
    # print(contact_set)
    return render_template("index.html", contact_set=contact_set)
